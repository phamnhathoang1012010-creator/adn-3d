<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>DNA 3D</title>

<style>
html, body {
  width:100%;
  height:100%;
  margin:0;
  overflow:hidden;
  background:black;
}

/* canvas FIX FULL */
canvas {
  position:fixed;
  top:0;
  left:0;
  width:100vw !important;
  height:100vh !important;
  display:block;
}

/* UI */
#ui {
  position:fixed;
  top:12px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:10px;
  z-index:10;
}
button{
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:#2196f3;
  color:white;
  font-weight:600;
}
</style>
</head>

<body>

<div id="ui">
  <button onclick="mode='xoan'">Xoắn</button>
  <button onclick="mode='thao'">Tháo</button>
  <button onclick="mode='nhan'">Nhân đôi</button>
</div>

<script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.152.2/examples/js/controls/OrbitControls.js"></script>

<script>
/* SCENE */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x000000);

/* CAMERA */
const camera = new THREE.PerspectiveCamera(
  60,
  window.innerWidth/window.innerHeight,
  0.1,
  1000
);
camera.position.z = 35;

/* RENDERER */
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setClearColor(0x000000,1);
document.body.appendChild(renderer.domElement);

/* LIGHT – nếu thiếu là đen */
scene.add(new THREE.AmbientLight(0xffffff,0.6));
const dLight = new THREE.DirectionalLight(0xffffff,1);
dLight.position.set(10,10,10);
scene.add(dLight);

/* CONTROLS */
const controls = new THREE.OrbitControls(camera,renderer.domElement);
controls.enableDamping = true;

/* DNA */
const dna = new THREE.Group();
scene.add(dna);

for(let i=0;i<60;i++){
  const a=i*0.35;
  const y=(i-30)*0.6;

  const g=new THREE.SphereGeometry(0.45,16,16);

  const m1=new THREE.Mesh(
    g,new THREE.MeshStandardMaterial({color:0xff5555})
  );
  m1.position.set(Math.cos(a)*4,y,Math.sin(a)*4);

  const m2=new THREE.Mesh(
    g,new THREE.MeshStandardMaterial({color:0x55aaff})
  );
  m2.position.set(-Math.cos(a)*4,y,-Math.sin(a)*4);

  dna.add(m1,m2);

  const bond=new THREE.Mesh(
    new THREE.CylinderGeometry(0.08,0.08,8),
    new THREE.MeshStandardMaterial({color:0xcccccc})
  );
  bond.rotation.z=Math.PI/2;
  bond.position.y=y;
  dna.add(bond);
}

let mode='xoan';

/* ANIMATE */
function animate(){
  requestAnimationFrame(animate);

  if(mode==='xoan') dna.rotation.y+=0.01;
  if(mode==='thao') dna.rotation.y+=0.003;
  if(mode==='nhan') dna.scale.setScalar(1+Math.sin(Date.now()*0.002)*0.05);

  controls.update();
  renderer.render(scene,camera);
}
animate();

/* RESIZE FIX */
window.addEventListener('resize',()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>
