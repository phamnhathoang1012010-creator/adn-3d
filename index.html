<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>M√¥ ph·ªèng ADN ‚Äì Xo·∫Øn, Th√°o xo·∫Øn, Sao ch√©p</title>
<style>
  body { background:black; color:white; text-align:center; font-family:sans-serif; }
  canvas { background:#000; display:block; margin:auto; }
  input { width:300px; }
</style>
</head>
<body>

<h2>üß¨ M√¥ ph·ªèng ADN</h2>
<p>Nh√°nh 1: Xo·∫Øn | Nh√°nh 2: Th√°o xo·∫Øn | Nh√°nh 3: Sao ch√©p</p>
<input type="range" min="0" max="200" value="0" id="slider">

<canvas id="c" width="400" height="700"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
const slider = document.getElementById("slider");

let angle = 0;

// M√†u nucleotide
const color = { A:"red", T:"green", G:"blue", C:"yellow" };
const pairs = [["A","T"],["G","C"],["A","T"],["G","C"],["A","T"]];

function drawPair(x1,y,x2,n1,n2,link=true){
  if(link){
    ctx.strokeStyle="#555";
    ctx.beginPath();
    ctx.moveTo(x1,y);
    ctx.lineTo(x2,y);
    ctx.stroke();
  }
  ctx.fillStyle=color[n1];
  ctx.beginPath(); ctx.arc(x1,y,6,0,Math.PI*2); ctx.fill();
  ctx.fillStyle=color[n2];
  ctx.beginPath(); ctx.arc(x2,y,6,0,Math.PI*2); ctx.fill();
}

function draw(){
  ctx.clearRect(0,0,400,700);

  /* ===== NH√ÅNH 1 ‚Äì ADN XO·∫ÆN ===== */
  ctx.save();
  ctx.translate(200,120);
  ctx.rotate(angle);
  pairs.forEach((p,i)=>{
    drawPair(-40,i*20-40,40,p[0],p[1]);
  });
  ctx.restore();

  angle += 0.01;

  /* ===== NH√ÅNH 2 ‚Äì ENZYME TH√ÅO XO·∫ÆN ===== */
  const cutPos = slider.value/2;

  pairs.forEach((p,i)=>{
    const y = 260 + i*30;
    const linked = !(i===cutPos || i===cutPos+1);
    drawPair(120,y,280,p[0],p[1],linked);
  });

  // enzyme helicase
  ctx.fillStyle="orange";
  ctx.fillRect(100,260 + cutPos*30 -10,200,20);

  /* ===== NH√ÅNH 3 ‚Äì DNA POLYMERASE ===== */
  pairs.forEach((p,i)=>{
    const y = 450 + i*30;
    // m·∫°ch khu√¥n
    ctx.fillStyle=color[p[0]];
    ctx.beginPath(); ctx.arc(150,y,6,0,Math.PI*2); ctx.fill();

    // nucleotide m·ªõi ƒë∆∞·ª£c g·∫Øn
    if(i <= cutPos){
      ctx.fillStyle=color[p[1]];
      ctx.beginPath(); ctx.arc(250,y,6,0,Math.PI*2); ctx.fill();

      ctx.strokeStyle="#555";
      ctx.beginPath();
      ctx.moveTo(150,y);
      ctx.lineTo(250,y);
      ctx.stroke();
    }
  });

  // DNA polymerase
  ctx.fillStyle="cyan";
  ctx.fillRect(230,440 + cutPos*30,40,20);

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
