<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Mô phỏng ADN 3D</title>

<style>
  body {
    margin: 0;
    overflow: hidden;
    background: black;
    font-family: Arial, sans-serif;
  }
  h1 {
    position: fixed;
    top: 10px;
    width: 100%;
    text-align: center;
    color: white;
    z-index: 10;
    font-weight: normal;
  }
</style>
</head>

<body>
<h1>Mô phỏng ADN 3D</h1>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.js"></script>

<script>
/* ===== SCENE ===== */
const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.z = 10;

/* ===== RENDERER ===== */
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

/* ===== CONTROLS (XOAY BẰNG TAY) ===== */
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.rotateSpeed = 0.6;

/* ===== LIGHT ===== */
scene.add(new THREE.AmbientLight(0xffffff, 0.6));
const light = new THREE.PointLight(0xffffff, 1);
light.position.set(5,5,5);
scene.add(light);

/* ===== ADN ===== */
const dna = new THREE.Group();
scene.add(dna);

const baseColors = {
  A: 0xff4d4d,
  T: 0x4da6ff,
  G: 0x4dff88,
  C: 0xffcc00
};

const bases = ["A","T","G","C"];
const pairs = 12;
const radius = 1.5;
const step = 0.5;

for(let i=0;i<pairs;i++){
  const angle = i * 0.6;
  const y = i * step - 3;

  const b1 = bases[i % 4];
  const b2 = (b1 === "A") ? "T" : (b1 === "T") ? "A" : (b1 === "G") ? "C" : "G";

  const geo = new THREE.SphereGeometry(0.18, 16, 16);

  const m1 = new THREE.MeshStandardMaterial({ color: baseColors[b1] });
  const m2 = new THREE.MeshStandardMaterial({ color: baseColors[b2] });

  const s1 = new THREE.Mesh(geo, m1);
  const s2 = new THREE.Mesh(geo, m2);

  s1.position.set(Math.cos(angle)*radius, y, Math.sin(angle)*radius);
  s2.position.set(-Math.cos(angle)*radius, y, -Math.sin(angle)*radius);

  dna.add(s1, s2);

  /* LIÊN KẾT HYDRO */
  const linkGeo = new THREE.CylinderGeometry(0.03,0.03,radius*2,8);
  const linkMat = new THREE.MeshStandardMaterial({ color: 0xffffff });
  const link = new THREE.Mesh(linkGeo, linkMat);

  link.position.y = y;
  link.rotation.z = Math.PI/2;
  link.rotation.y = angle;

  dna.add(link);
}

/* ===== ANIMATE ===== */
function animate(){
  requestAnimationFrame(animate);
  dna.rotation.y += 0.003;
  controls.update();
  renderer.render(scene,camera);
}
animate();

/* ===== RESIZE ===== */
window.addEventListener("resize", ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
